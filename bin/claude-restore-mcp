#!/usr/bin/env python3
"""Restore MCP servers into ~/.claude.json from dotfiles backup."""
import json, sys

CLAUDE_JSON = "/c/Users/oystein/.claude.json"
MCP_SOURCE = "/c/Users/oystein/.dotfiles/.claude/mcp-servers.json"

try:
    with open(CLAUDE_JSON) as f:
        config = json.load(f)
except (FileNotFoundError, json.JSONDecodeError):
    config = {}

with open(MCP_SOURCE) as f:
    mcp = json.load(f)

if config.get("mcpServers") == mcp["mcpServers"]:
    print("MCP servers already present, nothing to do.")
    sys.exit(0)

config["mcpServers"] = mcp["mcpServers"]

with open(CLAUDE_JSON, "w") as f:
    json.dump(config, f, indent=2)

print(f"Restored {len(mcp['mcpServers'])} MCP servers into {CLAUDE_JSON}")
